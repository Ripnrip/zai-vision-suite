import { describe, it, expect } from 'vitest';
import { ZaiVisionClient } from '../src/shared/client';
// Mock implementation for testing
class TestVisionClient extends ZaiVisionClient {
    constructor() {
        super('test-api-key'); // Pass dummy API key for testing
    }
    async analyze(imagePath, options) {
        // Mock implementation
        return {
            scene: `Mock analysis of ${imagePath}`,
            objects: [{ label: 'test object', confidence: 0.95 }]
        };
    }
    async processVideo(videoPath, options) {
        return {
            summary: `Mock processing of ${videoPath}`,
            frames: ['Frame 1', 'Frame 2', 'Frame 3']
        };
    }
    async extractText(imagePath, options) {
        return {
            text: `Mock OCR result from ${imagePath}`,
            language: 'en'
        };
    }
    async visionSearch(imagePath, options) {
        return {
            results: ['Result 1', 'Result 2']
        };
    }
    async visionWebSearch(imagePath, options) {
        return {
            results: ['Enhanced result 1', 'Enhanced result 2']
        };
    }
}
describe('Z.ai Vision Suite', () => {
    describe('analyze-image', () => {
        it('should analyze an image', async () => {
            const client = new TestVisionClient();
            const result = await client.analyze('test-image.jpg', { detail: 'high' });
            expect(result.scene).toContain('Mock analysis');
            expect(result.objects).toBeInstanceOf(Array);
            expect(result.objects[0]).toEqual({
                label: 'test object',
                confidence: 0.95
            });
        });
    });
    describe('process-video', () => {
        it('should process a video', async () => {
            const client = new TestVisionClient();
            const result = await client.processVideo('test-video.mp4', { frames: 5 });
            expect(result.summary).toContain('Mock processing');
            expect(result.frames).toHaveLength(3);
        });
    });
    describe('extract-text', () => {
        it('should extract text from image', async () => {
            const client = new TestVisionClient();
            const result = await client.extractText('test-image.jpg', { language: 'auto' });
            expect(result.text).toContain('Mock OCR');
            expect(result.language).toBe('en');
        });
    });
    describe('vision-search', () => {
        it('should search web using image', async () => {
            const client = new TestVisionClient();
            const result = await client.visionSearch('test-image.jpg', { searchType: 'web' });
            expect(result.results).toBeInstanceOf(Array);
            expect(result.results[0]).toBeDefined();
        });
    });
    describe('vision-web-search', () => {
        it('should perform enhanced web search', async () => {
            const client = new TestVisionClient();
            const result = await client.visionWebSearch('test-image.jpg', { queryType: 'information' });
            expect(result.results).toBeInstanceOf(Array);
            expect(result.results[0]).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzaW9uLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ2aXNpb24udGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDOUMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXZELGtDQUFrQztBQUNsQyxNQUFNLGdCQUFpQixTQUFRLGVBQWU7SUFDNUM7UUFDRSxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxpQ0FBaUM7SUFDMUQsQ0FBQztJQUVELEtBQUssQ0FBQyxPQUFPLENBQUMsU0FBaUIsRUFBRSxPQUFhO1FBQzVDLHNCQUFzQjtRQUN0QixPQUFPO1lBQ0wsS0FBSyxFQUFFLG9CQUFvQixTQUFTLEVBQUU7WUFDdEMsT0FBTyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsQ0FBQztTQUN0RCxDQUFDO0lBQ0osQ0FBQztJQUVELEtBQUssQ0FBQyxZQUFZLENBQUMsU0FBaUIsRUFBRSxPQUFhO1FBQ2pELE9BQU87WUFDTCxPQUFPLEVBQUUsc0JBQXNCLFNBQVMsRUFBRTtZQUMxQyxNQUFNLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQztTQUMxQyxDQUFDO0lBQ0osQ0FBQztJQUVELEtBQUssQ0FBQyxXQUFXLENBQUMsU0FBaUIsRUFBRSxPQUFhO1FBQ2hELE9BQU87WUFDTCxJQUFJLEVBQUUsd0JBQXdCLFNBQVMsRUFBRTtZQUN6QyxRQUFRLEVBQUUsSUFBSTtTQUNmLENBQUM7SUFDSixDQUFDO0lBRUQsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFpQixFQUFFLE9BQWE7UUFDakQsT0FBTztZQUNMLE9BQU8sRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUM7U0FDbEMsQ0FBQztJQUNKLENBQUM7SUFFRCxLQUFL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LENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtRQUNqQyxFQUFFLENBQUMsb0NBQW9DLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDbEQsTUFBTSxNQUFNLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3RDLE1BQU0sTUFBTSxHQUFHLE1BQU0sTUFBTSxDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFDO1lBRTVGLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDMUMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QgfSBmcm9tICd2aXRlc3QnO1xuaW1wb3J0IHsgWmFpVmlzaW9uQ2xpZW50IH0gZnJvbSAnLi4vc3JjL3NoYXJlZC9jbGllbnQnO1xuXG4vLyBNb2NrIGltcGxlbWVudGF0aW9uIGZvciB0ZXN0aW5nXG5jbGFzcyBUZXN0VmlzaW9uQ2xpZW50IGV4dGVuZHMgWmFpVmlzaW9uQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3Rlc3QtYXBpLWtleScpOyAvLyBQYXNzIGR1bW15IEFQSSBrZXkgZm9yIHRlc3RpbmdcbiAgfVxuXG4gIGFzeW5jIGFuYWx5emUoaW1hZ2VQYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICAvLyBNb2NrIGltcGxlbWVudGF0aW9uXG4gICAgcmV0dXJuIHtcbiAgICAgIHNjZW5lOiBgTW9jayBhbmFseXNpcyBvZiAke2ltYWdlUGF0aH1gLFxuICAgICAgb2JqZWN0czogW3sgbGFiZWw6ICd0ZXN0IG9iamVjdCcsIGNvbmZpZGVuY2U6IDAuOTUgfV1cbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgcHJvY2Vzc1ZpZGVvKHZpZGVvUGF0aDogc3RyaW5nLCBvcHRpb25zPzogYW55KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1bW1hcnk6IGBNb2NrIHByb2Nlc3Npbmcgb2YgJHt2aWRlb1BhdGh9YCxcbiAgICAgIGZyYW1lczogWydGcmFtZSAxJywgJ0ZyYW1lIDInLCAnRnJhbWUgMyddXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGV4dHJhY3RUZXh0KGltYWdlUGF0aDogc3RyaW5nLCBvcHRpb25zPzogYW55KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHQ6IGBNb2NrIE9DUiByZXN1bHQgZnJvbSAke2ltYWdlUGF0aH1gLFxuICAgICAgbGFuZ3VhZ2U6ICdlbidcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgdmlzaW9uU2VhcmNoKGltYWdlUGF0aDogc3RyaW5nLCBvcHRpb25zPzogYW55KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3VsdHM6IFsnUmVzdWx0IDEnLCAnUmVzdWx0IDInXVxuICAgIH07XG4gIH1cblxuICBhc3luYyB2aXNpb25XZWJTZWFyY2goaW1hZ2VQYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0czogWydFbmhhbmNlZCByZXN1bHQgMScsICdFbmhhbmNlZCByZXN1bHQgMiddXG4gICAgfTtcbiAgfVxufVxuXG5kZXNjcmliZSgnWi5haSBWaXNpb24gU3VpdGUnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdhbmFseXplLWltYWdlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYW5hbHl6ZSBhbiBpbWFnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBUZXN0VmlzaW9uQ2xpZW50KCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQuYW5hbHl6ZSgndGVzdC1pbWFnZS5qcGcnLCB7IGRldGFpbDogJ2hpZ2gnIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnNjZW5lKS50b0NvbnRhaW4oJ01vY2sgYW5hbHlzaXMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQub2JqZWN0cykudG9CZUluc3RhbmNlT2YoQXJyYXkpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5vYmplY3RzWzBdKS50b0VxdWFsKHtcbiAgICAgICAgbGFiZWw6ICd0ZXN0IG9iamVjdCcsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuOTVcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncHJvY2Vzcy12aWRlbycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByb2Nlc3MgYSB2aWRlbycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBUZXN0VmlzaW9uQ2xpZW50KCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQucHJvY2Vzc1ZpZGVvKCd0ZXN0LXZpZGVvLm1wNCcsIHsgZnJhbWVzOiA1IH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1bW1hcnkpLnRvQ29udGFpbignTW9jayBwcm9jZXNzaW5nJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmZyYW1lcykudG9IYXZlTGVuZ3RoKDMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZXh0cmFjdC10ZXh0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZXh0cmFjdCB0ZXh0IGZyb20gaW1hZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjbGllbnQgPSBuZXcgVGVzdFZpc2lvbkNsaWVudCgpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LmV4dHJhY3RUZXh0KCd0ZXN0LWltYWdlLmpwZycsIHsgbGFuZ3VhZ2U6ICdhdXRvJyB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC50ZXh0KS50b0NvbnRhaW4oJ01vY2sgT0NSJyk7XG4gICAgICBleHBlY3QocmVzdWx0Lmxhbmd1YWdlKS50b0JlKCdlbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndmlzaW9uLXNlYXJjaCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNlYXJjaCB3ZWIgdXNpbmcgaW1hZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjbGllbnQgPSBuZXcgVGVzdFZpc2lvbkNsaWVudCgpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnZpc2lvblNlYXJjaCgndGVzdC1pbWFnZS5qcGcnLCB7IHNlYXJjaFR5cGU6ICd3ZWInIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnJlc3VsdHMpLnRvQmVJbnN0YW5jZU9mKEFycmF5KTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmVzdWx0c1swXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Zpc2lvbi13ZWItc2VhcmNoJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcGVyZm9ybSBlbmhhbmNlZCB3ZWIgc2VhcmNoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2xpZW50ID0gbmV3IFRlc3RWaXNpb25DbGllbnQoKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC52aXNpb25XZWJTZWFyY2goJ3Rlc3QtaW1hZ2UuanBnJywgeyBxdWVyeVR5cGU6ICdpbmZvcm1hdGlvbicgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQucmVzdWx0cykudG9CZUluc3RhbmNlT2YoQXJyYXkpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZXN1bHRzWzBdKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19